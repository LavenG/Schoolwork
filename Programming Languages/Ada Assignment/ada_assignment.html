<html>
  <head>
    <meta http-equiv="Content-Style-Type" content="text/css" /> 
    <title>ada_assignment.html</title>
    <link href="/library/skin/tool_base.css" type="text/css" rel="stylesheet" media="all" />
    <link href="/library/skin/new-york-u/tool.css" type="text/css" rel="stylesheet" media="all" />
    <script type="text/javascript" language="JavaScript" src="/library/js/headscripts.js"></script>
    <style>body { padding: 5px !important; }</style>
  </head>
  <body>
<TITLE>Ada Programming Assignment</TITLE>

<H1>Ada Programming Assignment<br><br></h1>
<h2>Due <u>Sunday, February 28</u></h2>
<br>
Please compress your code files into a zip file and submit it via our NYU Classes page. 
<br><br>
The sections of the <a href="http://www.dwheeler.com/lovelace/master.htm">Lovelace Ada tutorial</a>
that you will find the most relevant are:
<ul> 
<li> <a href="http://www.dwheeler.com/lovelace/lesson2.htm">Lesson 2 - Basic Ada Structure (Packages)</a>
<li>  <a href="http://www.dwheeler.com/lovelace/lesson2.htm">Lesson 13 - Tasks and Protected Types</a>
</ul>
However, since you will need to declare types, implement procedures, etc., you should be sure to go through at least the following additional lessons in the Lovelace tutorial: 1, 2, 3, 4, 5, 6, 8, 9.
<br><br>
Also, be sure to review the sample Ada programs that I have provided under "Ada Resources" in the course page (also <a href="http://cs.nyu.edu/courses/spring16/CSCI-GA.2110-001/ada_programs/">here</a>).
<br><br>
<u><b>Assignment</b></u><br>
You will be implementing a program for reading in, sorting, summing, and printing an array of numbers, using concurrency.
<br><br>
Your program should consist of three files: Main.adb, Sort.ads, and Sort.adb as follows.
<br><br>
<u>Main.adb</u><br><br>

In the file Main.adb, write a procedure <tt>Main</tt> that performs the following.

<ul>   
<li>Read in 30 numbers into an array. Each number is an integer
between 0 and 1000, inclusive. You should use a subtype of integer as the element
type of the array to enforce this restriction.
<br><br>

<li>
Create three tasks, <tt>PrintTask</tt>, <tt>SortTask</tt> and 
<tt>AddTask</tt>, 
that run concurrently once the numbers have been read into the array.
These tasks perform the followng actions:
<ul>

<br>
<li><tt> PrintTask</tt>:
<ul>
<li>First print out the elements of the array.

<li>Notify <tt>SortTask</tt> that the numbers have been
printed.

<li>Wait for notification from <tt>SortTask</tt> that it
is finished.

<li>Print out the elements of the array again.

<li>Wait to receive a value from <tt>AddTask</tt>

<li>Print the value received from <tt>AddTask</tt>
</ul>

<br>
<li>
<tt>AddTask</tt>:
<ul>

<li> Wait for notification that <tt>SortTask</tt>
is finished.

<li>Compute the sum of the elements of the sorted array.

<li>Send the result to <tt>PrintTask</tt>.
</ul>

<br>
<li>
<tt>SortTask</tt>:
<ul>
<li>Wait for notification that <tt>PrintTask</tt>
has printed the elements of the array.

<li>Sort the array according to the parallel 
quicksort algorithm described below.

<li>Notify both <tt>PrintTask</tt> and <tt>AddTask</tt> that the
array is sorted.
</ul>
</ul>
</ul>

<br><br>
<u>Sort.ads</u> and <u>Sort.adb</u><br><br>

In a separate package called <tt>Sort</tt>, whose specification is
in the file Sort.ads and whose body is in the file Sort.adb, define
the procedure <tt>Quicksort(Low,High)</tt> for sorting those elements
of the above array between the <tt>Low</tt>'th element and the
<tt>High</tt>'th element, inclusive. The Quicksort algorithm
can be described as follows (assuming the array is called <tt>A</tt>).
<ul>
<br>
<li>If <tt>Low</tt> is greater than or equal to <tt>High</tt>, then return.

<br><br>
<li>Otherwise, apply the routine <tt>Split</tt> to <tt>A</tt> as follows:
<ul>
<li>Declare a variable <tt>M</tt> and set it to the median value of the <tt>A(Low)</tt>,
<tt>A(High)</tt>, and <tt>A((Low+High)/2)</tt>. If there are only two elements of
<tt>A</tt> then assign to <tt>M</tt> the smaller of the two values.
<li>
Declare two variables <tt>I</tt> and <tt>J</tt>, setting <tt>I</tt> to <tt>Low</tt>
and <tt>J</tt> to <tt>High</tt>.

<li>
In a loop, as long as <tt>I</tt> is less than <tt>J</tt>, perform the following steps:
<ul>  
<li>
While <tt>A(I)</tt> is less than or equal to <tt>M</tt>, increment <tt>I</tt>.
<li> 
While <tt>A(J)</tt> is greater than <tt>M</tt>, decrement <tt>J</tt>.
<li>
If <tt>I</tt> is less than <tt>J</tt>, exchange the values of <tt>A(I)</tt> and <tt>A(J)</tt>.
</ul>
Make sure that <tt>I</tt> never becomes greater than <tt>J</tt>.
</ul> 

<br>
<li> 
At this point, the array <tt>A</tt> has been split into two parts. The first part of <tt>A</tt>
contains only numbers less than or equal to <tt>M</tt> and the second part of
<tt>A</tt> contains only numbers greater than <tt>M</tt>.  Call <tt>Quicksort</tt>
recursively on each of the two parts.  The two recursive calls should
occur <u>concurrently</u> and should share the array. 
</ul> 
<br>
Assume that all elements of the array are unique (no repetitions of numbers).
Notice that by concurrently calling <tt>Quicksort</tt> recursively,
you will end up with many tasks executing concurrently.
</ul>

<br><br>
<b><u>Important:</u> You must write all of the code yourself, without getting any code from the
Web, from another student, or any other source. If you get stuck, please email me at
goldberg@cs.nyu.edu and I will help.</b>
  </body>
</html>

